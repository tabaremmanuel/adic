!function(e){"use strict";function s(e,s=!1){var t=s?'<a class="reply" data-lesson="'+e.data.comment_post_ID+'" data-comment="'+e.id+'">Reply</a> · ':"";return'<article class="media"><figure class="media-left"><p class="image '+(s?"is-64x64":"is-48x48")+'">'+e.ava+'</p></figure><div class="media-content" data-id="'+e.id+'"><div class="content"><p><strong>'+e.data.comment_author+"</strong><br>"+e.data.comment_content+"<br><small>"+t+e.time+' · <a class="like">Like</a></small></p></div></div></article>'}var t=e('<div class="etq-load"><div class="loader">');e(".slessons").on("click",".show-more",function(){e(this).parent().addClass("expanded")}),e(".lrating").on("click","input",function(){var s=e(this).val(),t=e(this).closest(".rating").find(".lesson-review");s<5?t.show():t.hide()}),e(".lesson-discussion").on("click",".reply",function(){var s=e(this).closest(".media").find(".image").html(),t=e(this).closest(".lesson-discussion").data("nonce");e(this).closest(".media-content").append(function(e,s="",t){return'<article class="media"><figure class="media-left"><p class="image is-48x48">'+s+'</p></figure><div class="media-content"><form class="les-dis"><div class="field"><p class="control"><textarea name="comment" class="textarea" placeholder="Add a comment..." required></textarea></p></div><div class="field submit"><p class="control"> <button class="button lbtn">Post</button></p><input type="hidden" name="lesson_id" value="'+e.data("lesson")+'"><input type="hidden" name="parent_id" value="'+e.data("comment")+'"><input type="hidden" name="action" value="lesson_comment"><input type="hidden" name="nonce" value="'+t+'"></div></form></div></article>'}(e(this),s,t))}),e(".lesson-discussion").on("submit",".les-dis",function(n){n.preventDefault();var a=e(this),i=a.serializeArray().reduce(function(e,s){return e[s.name]=s.value,e},{});a.closest(".media-content").prepend(t),e.ajax({type:"POST",url:ajaxurl,data:i,success:function(n){if(t.remove(),!n.posted)return!1;a.hasClass("main-res")?(a.find("textarea").val(""),e(".dis-content").prepend(s(n,!0))):(a.closest(".media").parent().append(s(n)),a.closest(".media").remove()),console.log(n)},error:function(e){t.remove(),console.log(e)}})}),e(".dis-head").on("click",".dropdown-trigger span",function(){e(this).closest(".dropdown").toggleClass("is-active")}),e(".dis-head").on("click",".dropdown-item a",function(s){s.preventDefault();var t=e(this).closest(".dropdown"),n=e(this).text();t.removeClass("is-active"),t.find(".dropdown-trigger span").html(n)}),e(".lesson-discussion").on("click","a.like",function(s){s.preventDefault();var t=e(this),n=t.closest(".media-content").data("id"),a=t.closest(".lesson-discussion").data("nonce");e.ajax({type:"POST",url:ajaxurl,data:{action:"lesson_like",nonce:a,id:n},success:function(e){"like"==e.stat?t.text("Unlike ("+e.count+")"):t.text("Like ("+e.count+")"),console.log(e)},error:function(e){console.log(e)}})})}(jQuery);